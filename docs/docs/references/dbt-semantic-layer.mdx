import SemanticLayerIntegrations from './assets/semantic-layer-integrations.jpg';
import DbtSemanticLayerServiceToken from './assets/dbt-semantic-layer-service-token.jpg';

# dbt Semantic Layer

You can use Lightdash to explore the semantic models you've defined in [dbt's Semantic Layer](https://www.getdbt.com/product/semantic-layer).

Note that this integration is **_separate_** to the Lightdash Semantic Layer (which is configured in your dbt project under the `meta` tags in your .yml files).

:::info

The dbt Semantic Layer integration is only available to [Lightdash Cloud users](https://www.lightdash.com/pricing). To have the dbt Semantic Layer integration activated on your account, please message support@lightdash.com.

:::

## Connect Lightdash to your dbt Semantic Layer

Before you can connect your dbt Semantic Layer to Lightdash, you need to:

- have an active dbt Cloud account (i.e. a paid dbt Cloud subscription).
- [have the dbt Semantic Layer configured](https://docs.getdbt.com/guides/sl-snowflake-qs?step=14)\*\* in on of your dbt Cloud projects.

### Set up your Semantic Layer Integration

1. Click on `settings` --> `project connection settings`
2. From the sidebar, head to `Semantic Layer Integrations`
3. Select `dbt Semantic Layer` from the list of Semantic Layer integrations

<img
  src={SemanticLayerIntegrations}
  width="996"
  height="549"
  style={{ display: 'block', margin: '0 auto 20px auto' }}
/>

### Service token

This is a service token to connect to the project configured with the dbt Semantic Layer. You need to create this service token from your dbt Cloud account.

To generate a service token:

1. Go to https://cloud.getdbt.com/next/settings
2. From the sidebar, click on `API tokens` --> `service tokens`, then `create new token`
3. Give your token at least `Semantic Layer Only` permissions and select the project where you've [configured the dbt Semantic Layer](https://docs.getdbt.com/docs/use-dbt-semantic-layer/setup-sl#set-up-dbt-semantic-layer).
4. Choose the Semantic Layer Credentials that you want to give to the token.
5. Hit `save`

Copy-paste the token into `Service Token` in the Lightdash Semantic Layer Integration page.

<img
  src={DbtSemanticLayerServiceToken}
  width="1065"
  height="514"
  style={{ display: 'block', margin: '0 auto 20px auto' }}
/>

### Domain

This is the domain where you dbt Cloud instance is being hosted.

### Environment

This is the unique identifier for the dbt production environment. This should match the environment that you selected when you [configured your dbt Semantic Layer connection](https://docs.getdbt.com/docs/use-dbt-semantic-layer/setup-sl#1-select-environment) for your dbt Cloud project.

You can get this from the dbt Cloud URL when you navigate to `Environments` under `Deploy`. If your URL ends with .../environments/222222, your environmentId is 222222.

## Run queries using the dbt Semantic Layer

Once you have your dbt Semantic Layer connected to a project in Lightdash, you can explore your Semantic Layer connection by clicking `new` --> `query using dbt Semantic Layer`.

## Build dashboards using dbt Semantic Layer queries

You can save charts from your dbt Semantic Layer queries and use these to build dashboards.

:::info

Dashboards can only contain charts from one semantic layer connection. That means charts created using the Lightdash Semantic Layer cannot be used on dashboards that contain charts created from the dbt Semantic Layer.

:::
