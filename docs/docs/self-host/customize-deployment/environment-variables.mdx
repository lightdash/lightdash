# Environment variables

This is a reference to all environment variables that can be used to configure a Lightdash deployment.

| Variable                                     | Description                                                                                                                                                                                                   | Required? | Default                                                         |
| -------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | --------------------------------------------------------------- |
| `PGHOST`                                     | Hostname of postgres server to store Lightdash data                                                                                                                                                           | ✅        |                                                                 |
| `PGPORT`                                     | Port of postgres server to store Lightdash data                                                                                                                                                               | ✅        |                                                                 |
| `PGUSER`                                     | Username of postgres user to access postgres server to store Lightdash data                                                                                                                                   | ✅        |                                                                 |
| `PGPASSWORD`                                 | Password for `PGUSER`                                                                                                                                                                                         | ✅        |                                                                 |
| `PGDATABASE`                                 | Database name inside postgres server to store Lightdash data                                                                                                                                                  | ✅        |                                                                 |
| `PGCONNECTIONURI`                            | Connection URI for postgres server to store Lightdash data in the format `postgresql://user:password@host:port/db?params`                                                                                     |           | This is an alternative to providing the previous `PG` variables |
| `LIGHTDASH_SECRET`                           | Secret key used to secure various tokens in Lightdash. This **must** be fixed between deployments. If the secret changes, you won't have access to Lightdash data.                                            | ✅        |                                                                 |
| `SECURE_COOKIES`                             | Only allows cookies to be stored over a `https` connection. We use cookies to keep you logged in. This is recommended to be set to `true` in production.                                                      |           | `false`                                                         |
| `COOKIES_MAX_AGE_HOURS`                      | How many hours a user session exists before the user is automatically signed out. For example if 24, then the user will be automatically after 24 hours of inactivity.                                        |           |                                                                 |
| `TRUST_PROXY`                                | This tells the Lightdash server that it can trust the `X-Forwarded-Proto` header it receives in requests. This is useful if you use `SECURE_COOKIES=true` behind a HTTPS terminated proxy that you can trust. |           | `false`                                                         |
| `LIGHTDASH_CONFIG_FILE`                      | Path to a `lightdash.yml` file to configure Lightdash. This is set by default and if you're using docker you shouldn't change it.                                                                             |           |                                                                 |
| `SITE_URL`                                   | Site url where Lightdash is being hosted. It should include the protocol. E.g https://lightdash.mycompany.com                                                                                                 |           | `http://localhost:8080`                                         |
| `SITE_NAME`                                  | Site name to be displayed in the header of the Lightdash UI.                                                                                                                                                  |           | `Lightdash`                                                     |
| `SITE_TITLE_TEXT`                            | Site title text to be displayed in the header of the Lightdash UI.                                                                                                                                            |           | `Explore and visualize your team's analytics and metrics`       |
| `SITE_LOGO`                                  | Site logo to be displayed in the header of the Lightdash UI. This can be the link to a CDN. If no link is specified it will use the locally stored image.                                                     |           | `https://example.cdn.com/logo.png                               |
| `SITE_LOGO_ALT`                              | Site logo alt text to be displayed in the header of the Lightdash UI.                                                                                                                                         |           | `Lightdash logo`                                                |
| `SITE_FAVICON`                               | Site favicon to be displayed in the browser tab. This can be the link to a CDN. If no link is specified it will use the locally stored image.                                                                 |           | `https://example.cdn.com/favicon.png`                           |
| `SITE_TOUCH_ICON`                            | Site touch icon to be displayed in the browser tab. This can be the link to a CDN. If no link is specified it will use the locally stored image.                                                              |           | `https://example.cdn.com/touch-icon.png`                        |
| `SITE_GITHUB_ICON`                           | Site github icon to be displayed in the footer of the Lightdash UI. This can be the link to a CDN. If no link is specified it will use the locally stored image.                                              |           | `https://example.cdn.com/github-icon.png`                       |
| `SITE_GITHUB_URL`                            | Site github url to be linked in the footer of the Lightdash UI as well as in e-mails.                                                                                                                         |           | `https://github.com/lightdash`                                  |
| `SITE_LINKEDIN_ICON`                         | Site linkedin icon to be displayed in the footer of the Lightdash UI. This can be the link to a CDN. If no link is specified it will use the locally stored image.                                            |           | `https://example.cdn.com/linkedin-icon.png`                     |
| `SITE_LINKEDIN_URL`                          | Site linkedin url to be linked in the footer of the Lightdash UI as well as in e-mails.                                                                                                                       |           | `https://www.linkedin.com/company/lightdash`                    |
| `SITE_TWITTER_ICON`                          | Site twitter icon to be displayed in the footer of the Lightdash UI. This can be the link to a CDN. If no link is specified it will use the locally stored image.                                             |           | `https://example.cdn.com/twitter-icon.png`                      |
| `SITE_TWITTER_URL`                           | Site twitter url to be linked in the footer of the Lightdash UI as well as in e-mails.                                                                                                                        |           | `https://twitter.com/lightdash`                                 |
| `SITE_HELPDESK_URL`                          | Site helpdesk url to be linked in the footer of the Lightdash UI as well as in e-mails.                                                                                                                       |           | `https://help.lightdash.com`                                    |
| `SITE_TOS_URL`                               | Site terms of service url to be linked in the footer of the Lightdash UI as well as in e-mails.                                                                                                               |           | `https://lightdash.com/terms-of-service`                        |
| `SUPPORT_EMAIL`                              | The default email address to send questions to                                                                                                                                                                |           | `suppoer@lightdash.com`                                         |
| `STATIC_IP`                                  | Server static IP so users can add the IP to their warehouse allow-list.                                                                                                                                       |           | `http://localhost:8080`                                         |
| `LIGHTDASH_QUERY_MAX_LIMIT`                  | Query max rows limit                                                                                                                                                                                          |           | `5000`                                                          |
| `SCHEDULER_ENABLED`                          | Enables/Disables the scheduler worker that triggers the scheduled deliveries.                                                                                                                                 |           | `true`                                                          |
| `SCHEDULER_CONCURRENCY`                      | How many scheduled delivery jobs can be processed concurrently.                                                                                                                                               |           | `1`                                                             |
| `SCHEDULER_JOB_TIMEOUT`                      | After how many milliseconds the job should be timeout so the scheduler worker can pick other jobs.                                                                                                            |           | `600000` (10 minutes)                                           |
| `LIGHTDASH_CSV_CELLS_LIMIT`                  | Max cells on CSV file exports                                                                                                                                                                                 |           | `100000`                                                        |
| `LIGHTDASH_CHART_VERSION_HISTORY_DAYS_LIMIT` | Configure how far back the chart versions history goes in days                                                                                                                                                |           | `3`                                                             |
| `LIGHTDASH_PIVOT_TABLE_MAX_COLUMN_LIMIT`     | Configure maximum number of columns in pivot table                                                                                                                                                            |           | `60`                                                            |
| `GROUPS_ENABLED`                             | Enables/Disables groups functionality                                                                                                                                                                         |           | `false`                                                         |
| `AUTH_ENABLE_OIDC_LINKING`                   | Enables/Disables linking the new OIDC(aka SSO) identity to an existing user if they already have another OIDC with the same email                                                                             |           | `false`                                                         |
| `CUSTOM_VISUALIZATIONS_ENABLED`              | Enables/Disables custom visualizations functionality                                                                                                                                                          |           | `false`                                                         |

Lightdash also accepts all [standard postgres environment variables](https://www.postgresql.org/docs/9.3/libpq-envars.html)

# Intercom environment variables

| Variable            | Description                                 | Required? | Default                       |
| ------------------- | ------------------------------------------- | --------- | ----------------------------- |
| `INTERCOM_APP_ID`   | Intercom app ID to enable Intercom chat     |           | `zppxyjpp`                    |
| `INTERCOM_APP_BASE` | Determines the API base to use for Intercom |           | `https://api-iam.intercom.io` |

# Caching environment variables

| Variable                   | Description                                                          | Required? | Default |
| -------------------------- | -------------------------------------------------------------------- | --------- | ------- |
| `RESULTS_CACHE_ENABLED`    | Enables/Disables caching functionality                               |           | `true`  |
| `CACHE_STALE_TIME_SECONDS` | How long the cache is considered fresh before it is considered stale |           | `86400` |

# SMTP environment variables

This is a reference to all the SMTP environment variables that can be used to configure a Lightdash email client.

| Variable                        | Description                                                                | Required? | Default   |
| ------------------------------- | -------------------------------------------------------------------------- | --------- | --------- |
| `EMAIL_SMTP_HOST`               | Hostname of email server                                                   | ✅        |           |
| `EMAIL_SMTP_PORT`               | Port of email server                                                       |           | 587       |
| `EMAIL_SMTP_SECURE`             | Secure connection                                                          |           | true      |
| `EMAIL_SMTP_USER`               | Auth user                                                                  | ✅        |           |
| `EMAIL_SMTP_PASSWORD`           | Auth password                                                              | [1]       |           |
| `EMAIL_SMTP_ACCESS_TOKEN`       | Auth access token for Oauth2 authentication                                | [1]       |           |
| `EMAIL_SMTP_ALLOW_INVALID_CERT` | Allow connection to TLS server with self-signed or invalid TLS certificate |           | false     |
| `EMAIL_SMTP_SENDER_EMAIL`       | The email address that sends emails                                        | ✅        |           |
| `EMAIL_SMTP_SENDER_NAME`        | The name of the email address that sends emails                            |           | Lightdash |

[1] `EMAIL_SMTP_PASSWORD` or `EMAIL_SMTP_ACCESS_TOKEN` needs to be provided

# SSO environment variables

These variables enable you to control Single Sign On (SSO) functionality.

| Variable                               | Description                                                                      | Required? | Default |
| -------------------------------------- | -------------------------------------------------------------------------------- | --------- | ------- |
| `AUTH_DISABLE_PASSWORD_AUTHENTICATION` | If `"true"` disables signing in with plain passwords                             |           | false   |
| `AUTH_ENABLE_GROUP_SYNC`               | If `"true"` enables assigning SSO groups to Lightdash groups                     |           | false   |
| `AUTH_GOOGLE_OAUTH2_CLIENT_ID`         | Required for Google SSO                                                          |           |         |
| `AUTH_GOOGLE_OAUTH2_CLIENT_SECRET`     | Required for Google SSO                                                          |           |         |
| `AUTH_OKTA_OAUTH_CLIENT_ID`            | Required for Okta SSO                                                            |           |         |
| `AUTH_OKTA_OAUTH_CLIENT_SECRET`        | Required for Okta SSO                                                            |           |         |
| `AUTH_OKTA_OAUTH_ISSUER`               | Required for Okta SSO                                                            |           |         |
| `AUTH_OKTA_DOMAIN`                     | Required for Okta SSO                                                            |           |         |
| `AUTH_OKTA_AUTHORIZATION_SERVER_ID`    | Optional for Okta SSO with a custom authorization server                         |           |         |
| `AUTH_OKTA_EXTRA_SCOPES`               | Optional for Okta SSO scopes (e.g. groups) without a custom authorization server |           |         |
| `AUTH_ONE_LOGIN_OAUTH_CLIENT_ID`       | Required for One Login SSO                                                       |           |         |
| `AUTH_ONE_LOGIN_OAUTH_CLIENT_SECRET`   | Required for One Login SSO                                                       |           |         |
| `AUTH_ONE_LOGIN_OAUTH_ISSUER`          | Required for One Login SSO                                                       |           |         |
| `AUTH_AZURE_AD_OAUTH_CLIENT_ID`        | Required for Azure AD                                                            |           |         |
| `AUTH_AZURE_AD_OAUTH_CLIENT_SECRET`    | Required for Azure AD                                                            |           |         |
| `AUTH_AZURE_AD_OAUTH_TENANT_ID`        | Required for Azure AD                                                            |           |         |
| `AUTH_AZURE_AD_OIDC_METADATA_ENDPOINT` | Optional for Azure AD                                                            |           |         |
| `AUTH_AZURE_AD_X509_CERT_PATH`         | Optional for Azure AD                                                            |           |         |
| `AUTH_AZURE_AD_X509_CERT`              | Optional for Azure AD                                                            |           |         |
| `AUTH_AZURE_AD_PRIVATE_KEY_PATH`       | Optional for Azure AD                                                            |           |         |
| `AUTH_AZURE_AD_PRIVATE_KEY`            | Optional for Azure AD                                                            |           |         |

# Logging environment variables

| Variable                       | Description                                                 | Required? | Default                |
| ------------------------------ | ----------------------------------------------------------- | --------- | ---------------------- |
| `LIGHTDASH_LOG_LEVEL`          | The minimum level of log messages to display                |           | `INFO`                 |
| `LIGHTDASH_LOG_FORMAT`         | The format of log messages                                  |           | `pretty`               |
| `LIGHTDASH_LOG_OUTPUTS`        | The outputs to send log messages to                         |           | `console`              |
| `LIGHTDASH_LOG_CONSOLE_LEVEL`  | The minimum level of log messages to display on the console |           | `LIGHTDASH_LOG_LEVEL`  |
| `LIGHTDASH_LOG_CONSOLE_FORMAT` | The format of log messages on the console                   |           | `LIGHTDASH_LOG_FORMAT` |
| `LIGHTDASH_LOG_FILE_LEVEL`     | The minimum level of log messages to write to the log file  |           | `LIGHTDASH_LOG_LEVEL`  |
| `LIGHTDASH_LOG_FILE_FORMAT`    | The format of log messages in the log file                  |           | `LIGHTDASH_LOG_FORMAT` |
| `LIGHTDASH_LOG_FILE_PATH`      | The path to the log file                                    |           | `./logs/all.log`       |

# dbt semantic layer environment variables

| Variable                   | Description                         | Required?                                                                                                                                                      | Default                                 |
| -------------------------- | ----------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------- |
| `DBT_CLOUD_DOMAIN`         | dbt cloud Semantic Layer API domain | Only required if your dbt cloud URL is similar to this `client123.us1.dbt.com`. If so, you should set the value `https://client123.semantic-layer.us1.dbt.com` | https://semantic-layer.cloud.getdbt.com |
| `DBT_CLOUD_ENVIRONMENT_ID` | dbt environment ID                  | ✅                                                                                                                                                             |                                         |
| `DBT_CLOUD_BEARER_TOKEN`   | dbt cloud bearer token              | ✅                                                                                                                                                             |                                         |
