name: F4. Filter last table calculation
description: ""
tableName: orders
updatedAt: "2025-08-27T17:10:51.406Z"
metricQuery:
  exploreName: orders
  dimensions:
    - orders_shipping_method
    - orders_order_id
  metrics:
    - orders_total_order_amount
  filters:
    tableCalculations:
      id: bd859cdf-e280-4e66-8d7c-711fa88d4331
      and:
        - id: 760f6f91-20fd-47d3-96d4-471358a179f2
          target:
            fieldId: percentage_of_shipping_method_order_total
          values:
            - 0.05
          operator: greaterThan
  sorts:
    - fieldId: orders_total_order_amount
      descending: true
  limit: 500
  metricOverrides: {}
  tableCalculations:
    - name: order_total_by_shipping_method
      displayName: Order total by shipping method
      sql: >-
        sum(${orders.total_order_amount}) over(partition by
        ${orders.shipping_method})
      format:
        type: default
        separator: default
      type: number
    - name: percentage_of_shipping_method_order_total
      displayName: percentage_of_shipping_method_order_total
      sql: ${orders.total_order_amount}/${order_total_by_shipping_method}
      format:
        type: percent
        separator: default
      type: number
  additionalMetrics:
    - name: amount_sum_of_amount
      label: Sum of Amount
      description: "Sum of Amount on the table Orders "
      uuid: a1308896-958c-418d-94ec-f524ee9372a2
      sql: ${TABLE}.amount
      table: orders
      type: sum
      baseDimensionName: amount
      formatOptions:
        type: default
        separator: default
  customDimensions: []
chartConfig:
  type: table
  config:
    columns: {}
    metricsAsRows: false
    showSubtotals: false
    hideRowNumbers: false
    showTableNames: true
    showResultsTotal: false
    showRowCalculation: false
    showColumnCalculation: false
    conditionalFormattings: []
dashboardSlug: table-calculation-examples
slug: f4-filter-last-table-calculation
tableConfig:
  columnOrder:
    - orders_shipping_method
    - orders_order_id
    - orders_total_order_amount
    - order_total_by_shipping_method
    - percentage_of_shipping_method_order_total
spaceSlug: parent-space-3
version: 1
downloadedAt: "2025-08-27T17:49:38.467Z"
