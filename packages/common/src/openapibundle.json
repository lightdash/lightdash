{
    "openapi": "3.0.1",
    "info": {
        "title": "Lightdash API",
        "description": "API spec for Lightdash server",
        "contact": {
            "email": "support@lightdash.com"
        },
        "license": {
            "name": "MIT",
            "url": "https://github.com/lightdash/lightdash/blob/main/LICENSE"
        },
        "version": "1.0.0"
    },
    "externalDocs": {
        "description": "Lightdash documentation",
        "url": "https://docs.lightdash.com"
    },
    "servers": [
        {
            "url": "http://localhost:8080/api/v1"
        }
    ],
    "tags": [
        {
            "name": "user",
            "description": "User operation"
        }
    ],
    "paths": {
        "/login": {
            "post": {
                "summary": "Login with email and password",
                "tags": ["user"],
                "operationId": "loginWithPassword",
                "security": [],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Login"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successfully logged in",
                        "headers": {
                            "Set-Cookie": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        },
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/user": {
            "get": {
                "summary": "Get user profile",
                "tags": ["user"],
                "operationId": "getUser",
                "responses": {
                    "200": {
                        "description": "Successfully found user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/LightdashUser"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "post": {
                "summary": "Create user",
                "tags": ["user"],
                "operationId": "createUser",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateUser"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successfully created user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/LightdashUser"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/org": {
            "patch": {
                "summary": "Update organization",
                "tags": ["organization"],
                "operationId": "updateOrganization",
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/SuccessResponse"
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/org/users": {
            "get": {
                "summary": "Get organization users",
                "tags": ["organization"],
                "operationId": "getOrganizationUsers",
                "responses": {
                    "200": {
                        "description": "Successfully get organization users",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/OrganizationUser"
                                                    }
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/org/projects/{projectUuid}": {
            "delete": {
                "summary": "Delete organization project",
                "tags": ["organization", "project"],
                "operationId": "deleteOrganizationProject",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/SuccessResponse"
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/org/projects": {
            "get": {
                "summary": "List organization projects",
                "tags": ["organization", "project"],
                "operationId": "getOrganizationProjects",
                "parameters": [],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "role": {
                                        "type": "string"
                                    }
                                },
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully got projects",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/Project"
                                                    }
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/org/users/{userUuid}": {
            "patch": {
                "summary": "Update organization member",
                "tags": ["organization"],
                "operationId": "updateOrganizationMember",
                "parameters": [
                    {
                        "in": "path",
                        "name": "userUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "role": {
                                        "type": "string"
                                    }
                                },
                                "additionalProperties": false
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully updated user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "$ref": "#/components/schemas/OrganizationUser"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "delete": {
                "summary": "Delete organization user",
                "tags": ["organization"],
                "operationId": "deleteOrganizationUser",
                "parameters": [
                    {
                        "in": "path",
                        "name": "userUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/SuccessResponse"
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/invite-links": {
            "delete": {
                "summary": "Delete all invite links",
                "tags": ["user"],
                "operationId": "deleteInviteLinks",
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/SuccessResponse"
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "post": {
                "summary": "Create a new invite link",
                "tags": ["user"],
                "operationId": "createInviteLink",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateInviteLink"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "201": {
                        "description": "Successfully created invite link",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/InviteLink"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/invite-links/{inviteLinkId}": {
            "get": {
                "summary": "Get an invite link",
                "tags": ["user"],
                "operationId": "getInviteLink",
                "parameters": [
                    {
                        "in": "path",
                        "name": "inviteLinkId",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully got invite link",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/InviteLink"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/projects/{projectUuid}/sqlQuery": {
            "post": {
                "summary": "Run sql query",
                "description": "Run a sql query on project",
                "tags": ["project"],
                "operationId": "runSqlQuery",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "requestBody": {
                    "description": "Sql",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "sql": {
                                        "type": "string"
                                    }
                                },
                                "required": ["sql"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully ran sql query",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "rows": {
                                                    "type": "array",
                                                    "items": {
                                                        "additionalProperties": true
                                                    }
                                                }
                                            },
                                            "required": ["rows"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/projects/{projectUuid}/explores/{tableId}/runQuery": {
            "post": {
                "summary": "Run query",
                "description": "Run a query on project",
                "tags": ["project"],
                "operationId": "runQuery",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    },
                    {
                        "in": "path",
                        "name": "tableId",
                        "schema": {
                            "type": "string"
                        },
                        "required": true
                    }
                ],
                "requestBody": {
                    "description": "query",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "metrics": {
                                        "type": "array"
                                    },
                                    "dimensions": {
                                        "type": "array"
                                    },
                                    "limit": {
                                        "type": "number"
                                    },
                                    "sorts": {
                                        "type": "array"
                                    },
                                    "tableCalculations": {
                                        "type": "array"
                                    }
                                },
                                "required": ["metrics", "dimensions"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully ran query",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "results": {
                                                    "type": "object",
                                                    "properties": {
                                                        "rows": {
                                                            "type": "array",
                                                            "items": {
                                                                "$ref": "#/components/schemas/QueryResult"
                                                            }
                                                        }
                                                    }
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/projects/{projectUuid}/catalog": {
            "get": {
                "summary": "Get project catalog",
                "description": "Get project catalog with all valid tables",
                "tags": ["project"],
                "operationId": "getProjectCatalog",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully get project catalog",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/ProjectCatalog"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/projects/{projectUuid}/dashboards": {
            "post": {
                "summary": "Create dashboard",
                "description": "Create new dashboard on project",
                "tags": ["dashboard"],
                "operationId": "createDashboard",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    },
                    {
                        "in": "query",
                        "name": "duplicateFrom",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": false
                    }
                ],
                "requestBody": {
                    "description": "New dashboard specification",
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateDashboard"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successfully created dashboard",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/Dashboard"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "get": {
                "summary": "List dashboards",
                "description": "List all dashboards in a project",
                "tags": ["dashboard"],
                "operationId": "getDashboards",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    },
                    {
                        "in": "query",
                        "name": "chartUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": false
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of all dashboards in project",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/DashboardListItem"
                                                    }
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/projects/{projectUuid}/tablesConfiguration": {
            "get": {
                "summary": "Get project tables configuration",
                "description": "Get project tables configuration",
                "tags": ["project"],
                "operationId": "getProjectTablesConfiguration",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Project tables configuration",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/ProjectTablesConfiguration"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "patch": {
                "summary": "Update project tables configuration",
                "description": "Update project tables configuration",
                "tags": ["project"],
                "operationId": "updateProjectTablesConfiguration",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "requestBody": {
                    "description": "New tables configuration",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/ProjectTablesConfiguration"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successfully created dashboard",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/ProjectTablesConfiguration"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/projects/{projectUuid}/saved": {
            "post": {
                "summary": "Create saved chart in project",
                "tags": ["saved"],
                "operationId": "postSavedChart",
                "parameters": [
                    {
                        "in": "path",
                        "name": "projectUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    },
                    {
                        "in": "query",
                        "name": "duplicateFrom",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": false
                    }
                ],
                "requestBody": {
                    "required": false,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateSavedChart"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Details for a saved chart",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/SavedChart"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/dashboards/{dashboardUuid}": {
            "get": {
                "summary": "Get dashboard",
                "description": "Get details for a single dashboard by dashboard_id",
                "tags": ["dashboard"],
                "operationId": "getDashboard",
                "parameters": [
                    {
                        "in": "path",
                        "name": "dashboardUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Details for a single dashboard",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/Dashboard"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "patch": {
                "summary": "Update dashboard",
                "description": "Update details for a single dashboard by dashboard_id",
                "tags": ["dashboard"],
                "operationId": "patchDashboard",
                "parameters": [
                    {
                        "in": "path",
                        "name": "dashboardUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "requestBody": {
                    "description": "Dashboard fields",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateDashboard"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Details for a single dashboard",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/Dashboard"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "delete": {
                "summary": "Delete dashboard",
                "description": "Delete a single dashboard by dashboard_id",
                "tags": ["dashboard"],
                "operationId": "deleteDashboard",
                "parameters": [
                    {
                        "in": "path",
                        "name": "dashboardUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "$ref": "#/components/responses/SuccessResponse"
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/saved/{savedChartUuid}/availableFilters": {
            "parameters": [
                {
                    "schema": {
                        "type": "string"
                    },
                    "name": "savedChartUuid",
                    "in": "path",
                    "required": true
                }
            ],
            "get": {
                "summary": "Get available filters for a saved chart",
                "tags": ["saved-chart"],
                "operationId": "getAvailableChartFilters",
                "responses": {
                    "200": {
                        "description": "Available filters for a saved chart",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/Fields"
                                                }
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/saved/{savedChartUuid}": {
            "get": {
                "summary": "Get a saved chart",
                "tags": ["saved"],
                "operationId": "getSavedChart",
                "parameters": [
                    {
                        "in": "path",
                        "name": "savedChartUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Details for a saved chart",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/SavedChart"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "delete": {
                "summary": "Delete a saved chart",
                "tags": ["saved"],
                "operationId": "deleteSavedChart",
                "parameters": [
                    {
                        "in": "path",
                        "name": "savedChartUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Acknowledge success",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Success"
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "patch": {
                "summary": "Update a saved chart",
                "tags": ["saved"],
                "operationId": "patchSavedChart",
                "parameters": [
                    {
                        "in": "path",
                        "name": "savedChartUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "requestBody": {
                    "description": "Saved chart name",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/UpdateSavedChart"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Details for a saved chart",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/SavedChart"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/saved/{savedChartUuid}/version": {
            "post": {
                "summary": "Create a new saved chart version",
                "tags": ["saved"],
                "operationId": "createSavedChartVersion",
                "parameters": [
                    {
                        "in": "path",
                        "name": "savedChartUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateSavedChartVersion"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Details for a saved chart",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/SavedChart"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/jobs/{jobUuid}": {
            "get": {
                "summary": "List status of a job",
                "tags": ["job"],
                "operationId": "getJob",
                "parameters": [
                    {
                        "in": "path",
                        "name": "jobUuid",
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        },
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully got job status",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/Job"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        },
        "/user/me/personal-access-tokens": {
            "get": {
                "summary": "Get all personal access tokens",
                "description": "List all personal access tokens for user",
                "tags": ["user"],
                "operationId": "getPersonalAccessTokens",
                "responses": {
                    "200": {
                        "description": "List all personal access tokens for user",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "properties": {
                                                "results": {
                                                    "type": "array",
                                                    "items": {
                                                        "$ref": "#/components/schemas/PersonalAccessToken"
                                                    }
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            },
            "post": {
                "summary": "Create a personal access token",
                "tags": ["user"],
                "operationId": "createPersonalAccessToken",
                "requestBody": {
                    "description": "Personal access token",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreatePersonalAccessToken"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Details of personal access token including the token in plain text.",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "allOf": [
                                        {
                                            "$ref": "#/components/schemas/Success"
                                        },
                                        {
                                            "type": "object",
                                            "properties": {
                                                "results": {
                                                    "$ref": "#/components/schemas/PersonalAccessTokenWithSecret"
                                                }
                                            },
                                            "required": ["results"]
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "default": {
                        "$ref": "#/components/responses/ErrorResponse"
                    }
                }
            }
        }
    },
    "security": [
        {
            "cookieAuth": []
        }
    ],
    "components": {
        "securitySchemes": {
            "cookieAuth": {
                "type": "apiKey",
                "in": "cookie",
                "name": "connect.sid"
            }
        },
        "schemas": {
            "Login": {
                "type": "object",
                "properties": {
                    "email": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    }
                },
                "required": ["email", "password"]
            },
            "Error": {
                "type": "object",
                "required": ["status", "error"],
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": ["error"]
                    },
                    "error": {
                        "type": "object",
                        "required": ["name", "statusCode", "message"],
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "statusCode": {
                                "type": "number"
                            },
                            "message": {
                                "type": "string"
                            },
                            "data": {
                                "type": "object"
                            }
                        }
                    }
                }
            },
            "Success": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": ["ok"]
                    }
                }
            },
            "LightdashUser": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "userUuid": {
                        "type": "string"
                    },
                    "firstName": {
                        "type": "string"
                    },
                    "lastName": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "organizationUuid": {
                        "type": "string"
                    },
                    "organizationName": {
                        "type": "string"
                    },
                    "isTrackingAnonymized": {
                        "type": "boolean"
                    },
                    "isMarketingOptedIn": {
                        "type": "boolean"
                    },
                    "isSetupComplete": {
                        "type": "boolean"
                    },
                    "role": {
                        "type": "string"
                    },
                    "abilityRules": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                },
                "required": [
                    "userUuid",
                    "firstName",
                    "lastName",
                    "organizationUuid",
                    "organizationName",
                    "isTrackingAnonymized",
                    "isMarketingOptedIn",
                    "isSetupComplete",
                    "role"
                ]
            },
            "CreateUser": {
                "type": "object",
                "properties": {
                    "inviteCode": {
                        "type": "string"
                    },
                    "firstName": {
                        "type": "string"
                    },
                    "lastName": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    },
                    "password": {
                        "type": "string"
                    }
                },
                "required": [
                    "inviteCode",
                    "firstName",
                    "lastName",
                    "email",
                    "password"
                ]
            },
            "OrganizationUser": {
                "type": "object",
                "properties": {
                    "userUuid": {
                        "type": "string"
                    },
                    "firstName": {
                        "type": "string"
                    },
                    "lastName": {
                        "type": "string"
                    },
                    "email": {
                        "type": "string"
                    }
                },
                "required": ["userUuid", "firstName", "lastName"]
            },
            "Project": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "projectUuid": {
                        "type": "string"
                    }
                },
                "required": ["name", "projectUuid"]
            },
            "CreateInviteLink": {
                "type": "object",
                "properties": {
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "required": ["expiresAt"]
            },
            "InviteLink": {
                "type": "object",
                "properties": {
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "inviteCode": {
                        "type": "string"
                    },
                    "inviteUrl": {
                        "type": "string"
                    }
                },
                "required": ["expiresAt", "inviteCode", "inviteUrl"]
            },
            "QueryResult": {
                "type": "object",
                "additionalProperties": {
                    "type": "object",
                    "title": "columnId",
                    "properties": {
                        "value": {
                            "type": "object",
                            "properties": {
                                "raw": {},
                                "formatted": {}
                            }
                        }
                    }
                }
            },
            "ProjectCatalog": {
                "type": "object",
                "additionalProperties": {
                    "type": "object",
                    "title": "Database",
                    "additionalProperties": {
                        "type": "object",
                        "title": "Schema",
                        "additionalProperties": {
                            "type": "object",
                            "title": "Table",
                            "properties": {
                                "description": {
                                    "type": "string"
                                },
                                "sqlTable": {
                                    "type": "string"
                                }
                            },
                            "required": ["sqlTable"]
                        }
                    }
                }
            },
            "DashboardListItem": {
                "type": "object",
                "properties": {
                    "uuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "required": ["uuid", "name", "updatedAt"]
            },
            "TilePropertiesChart": {
                "type": "object",
                "properties": {
                    "savedChartUuid": {
                        "type": "string",
                        "format": "uuid",
                        "nullable": true
                    }
                },
                "required": ["savedChartUuid"]
            },
            "LoomTileProperties": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "url": {
                        "type": "string"
                    }
                },
                "required": ["title", "url"]
            },
            "MarkdownTileProperties": {
                "type": "object",
                "properties": {
                    "title": {
                        "type": "string"
                    },
                    "content": {
                        "type": "string"
                    }
                }
            },
            "CreateDashboardTile": {
                "type": "object",
                "properties": {
                    "uuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "type": {
                        "type": "string",
                        "enum": ["saved_chart", "markdown", "loom"]
                    },
                    "properties": {
                        "anyOf": [
                            {
                                "$ref": "#/components/schemas/TilePropertiesChart"
                            },
                            {
                                "$ref": "#/components/schemas/LoomTileProperties"
                            },
                            {
                                "$ref": "#/components/schemas/MarkdownTileProperties"
                            }
                        ]
                    },
                    "x": {
                        "type": "number"
                    },
                    "y": {
                        "type": "number"
                    },
                    "h": {
                        "type": "number"
                    },
                    "w": {
                        "type": "number"
                    }
                },
                "required": ["properties", "type", "x", "y", "h", "w"]
            },
            "DashboardFilterRule": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "target": {
                        "type": "object",
                        "properties": {
                            "fieldId": {
                                "type": "string"
                            },
                            "tableName": {
                                "type": "string"
                            }
                        }
                    },
                    "operator": {
                        "type": "string"
                    },
                    "values": {
                        "type": "array"
                    },
                    "settings": {
                        "type": "object"
                    }
                },
                "required": ["id", "target", "operator"]
            },
            "DashboardFilters": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "dimensions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DashboardFilterRule"
                        }
                    },
                    "metrics": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DashboardFilterRule"
                        }
                    }
                },
                "required": ["dimensions", "metrics"]
            },
            "CreateDashboard": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "tiles": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/CreateDashboardTile"
                        }
                    },
                    "filters": {
                        "$ref": "#/components/schemas/DashboardFilters"
                    }
                }
            },
            "DashboardTile": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/CreateDashboardTile"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "uuid": {
                                "type": "string",
                                "format": "uuid"
                            }
                        },
                        "required": ["uuid"]
                    }
                ]
            },
            "Dashboard": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "uuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "tiles": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DashboardTile"
                        }
                    },
                    "filters": {
                        "$ref": "#/components/schemas/DashboardFilters"
                    }
                },
                "required": ["uuid", "tiles", "name", "updatedAt", "filters"]
            },
            "ProjectTablesConfiguration": {
                "type": "object",
                "properties": {
                    "tableSelection": {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string",
                                "enum": ["ALL", "WITH_TAGS", "WITH_NAMES"]
                            },
                            "value": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                },
                                "nullable": true
                            }
                        },
                        "required": ["type", "value"]
                    }
                },
                "required": ["tableSelection"]
            },
            "ChartConfig": {
                "properties": {
                    "chartType": {
                        "type": "string",
                        "enum": ["big_number", "table", "cartesian"]
                    },
                    "config": {
                        "type": "object",
                        "nullable": true,
                        "additionalProperties": true
                    }
                }
            },
            "CreateSavedChart": {
                "type": "object",
                "additionalProperties": true,
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    },
                    "tableName": {
                        "type": "string"
                    },
                    "metricQuery": {
                        "type": "object"
                    },
                    "chartConfig": {
                        "$ref": "#/components/schemas/ChartConfig"
                    },
                    "tableConfig": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "columnOrder": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        },
                        "required": ["columnOrder"]
                    },
                    "pivotConfig": {
                        "type": "object",
                        "properties": {
                            "columns": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        },
                        "required": ["columns"]
                    }
                }
            },
            "UpdatedByUser": {
                "type": "object",
                "properties": {
                    "userUuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "firstName": {
                        "type": "string"
                    },
                    "lastName": {
                        "type": "string"
                    }
                },
                "required": ["userUuid", "firstName", "lastName"]
            },
            "SavedChart": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "uuid": {
                        "type": "string"
                    },
                    "projectUuid": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    },
                    "tableName": {
                        "type": "string"
                    },
                    "metricQuery": {
                        "type": "object"
                    },
                    "chartConfig": {
                        "$ref": "#/components/schemas/ChartConfig"
                    },
                    "tableConfig": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "columnOrder": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        },
                        "required": ["columnOrder"]
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedByUser": {
                        "$ref": "#/components/schemas/UpdatedByUser"
                    },
                    "pivotConfig": {
                        "type": "object",
                        "properties": {
                            "columns": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        },
                        "required": ["columns"]
                    }
                },
                "required": [
                    "uuid",
                    "projectUuid",
                    "name",
                    "tableName",
                    "metricQuery",
                    "chartConfig",
                    "tableConfig",
                    "updatedAt"
                ]
            },
            "UpdateDashboard": {
                "oneOf": [
                    {
                        "title": "Unversioned fields",
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "description": {
                                "type": "string",
                                "nullable": true
                            }
                        },
                        "required": ["name"]
                    },
                    {
                        "title": "Versioned fields",
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "tiles": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/CreateDashboardTile"
                                }
                            },
                            "filters": {
                                "$ref": "#/components/schemas/DashboardFilters"
                            }
                        },
                        "required": ["tiles", "filters"]
                    },
                    {
                        "title": "All fields",
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "description": {
                                "type": "string",
                                "nullable": true
                            },
                            "tiles": {
                                "type": "array",
                                "items": {
                                    "$ref": "#/components/schemas/CreateDashboardTile"
                                }
                            },
                            "filters": {
                                "$ref": "#/components/schemas/DashboardFilters"
                            }
                        },
                        "required": ["name", "tiles", "filters"]
                    }
                ]
            },
            "Field": {
                "type": "object",
                "properties": {
                    "fieldType": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "label": {
                        "type": "string"
                    },
                    "table": {
                        "type": "string"
                    },
                    "tableLabel": {
                        "type": "string"
                    },
                    "sql": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string"
                    }
                },
                "required": [
                    "fieldType",
                    "type",
                    "name",
                    "label",
                    "table",
                    "tableLabel",
                    "sql"
                ]
            },
            "Fields": {
                "type": "array",
                "items": {
                    "$ref": "#/components/schemas/Field"
                }
            },
            "UpdateSavedChart": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "name": {
                        "type": "string"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true
                    }
                },
                "required": ["name"]
            },
            "CreateSavedChartVersion": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "tableName": {
                        "type": "string"
                    },
                    "metricQuery": {
                        "type": "object"
                    },
                    "chartConfig": {
                        "$ref": "#/components/schemas/ChartConfig"
                    },
                    "tableConfig": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "columnOrder": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        },
                        "required": ["columnOrder"]
                    },
                    "pivotConfig": {
                        "type": "object",
                        "properties": {
                            "columns": {
                                "type": "array",
                                "items": {
                                    "type": "string"
                                }
                            }
                        },
                        "required": ["columns"]
                    }
                },
                "required": [
                    "tableName",
                    "metricQuery",
                    "chartConfig",
                    "tableConfig"
                ]
            },
            "Step": {
                "type": "object",
                "properties": {
                    "jobUuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "startedAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "stepStatus": {
                        "type": "string",
                        "enum": [
                            "DONE",
                            "RUNNING",
                            "ERROR",
                            "PENDING",
                            "SKIPPED"
                        ]
                    },
                    "stepType": {
                        "type": "string"
                    },
                    "stepLabel": {
                        "type": "string"
                    },
                    "error": {
                        "nullable": true,
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "message": {
                                "type": "string"
                            }
                        }
                    }
                },
                "required": [
                    "jobUuid",
                    "createdAt",
                    "stepStatus",
                    "stepType",
                    "stepLabel",
                    "updatedAt",
                    "startedAt"
                ]
            },
            "Job": {
                "type": "object",
                "properties": {
                    "jobUuid": {
                        "type": "string",
                        "format": "uuid"
                    },
                    "projectUuid": {
                        "type": "string",
                        "format": "uuid",
                        "nullable": true
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "updatedAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "jobStatus": {
                        "type": "string",
                        "enum": ["STARTED", "DONE", "RUNNING", "ERROR"]
                    },
                    "jobType": {
                        "type": "string",
                        "enum": ["COMPILE_PROJECT", "CREATE_PROJECT"]
                    },
                    "jobResults": {
                        "type": "object",
                        "nullable": true
                    },
                    "steps": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Step"
                        }
                    }
                },
                "required": [
                    "jobUuid",
                    "createdAt",
                    "updatedAt",
                    "jobStatus",
                    "jobType",
                    "steps"
                ]
            },
            "PersonalAccessToken": {
                "type": "object",
                "properties": {
                    "uuid": {
                        "type": "string"
                    },
                    "token": {
                        "type": "string"
                    },
                    "createdAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time",
                        "nullable": true
                    },
                    "description": {
                        "type": "string"
                    }
                },
                "required": ["createdAt", "description"]
            },
            "CreatePersonalAccessToken": {
                "type": "object",
                "properties": {
                    "expiresAt": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "description": {
                        "type": "string"
                    }
                },
                "required": ["description"]
            },
            "PersonalAccessTokenWithSecret": {
                "allOf": [
                    {
                        "$ref": "#/components/schemas/PersonalAccessToken"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "token": {
                                "type": "string"
                            }
                        },
                        "required": ["token"]
                    }
                ]
            }
        },
        "responses": {
            "ErrorResponse": {
                "description": "Error",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Error"
                        }
                    }
                }
            },
            "SuccessResponse": {
                "description": "Success",
                "content": {
                    "application/json": {
                        "schema": {
                            "$ref": "#/components/schemas/Success"
                        }
                    }
                }
            }
        }
    }
}
