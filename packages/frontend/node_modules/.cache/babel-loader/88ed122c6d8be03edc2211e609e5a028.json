{"ast":null,"code":"import * as React from 'react';\nimport { createPopper as defaultCreatePopper } from '@popperjs/core';\nimport isEqual from 'react-fast-compare';\nimport { fromEntries, useIsomorphicLayoutEffect } from './utils';\nvar EMPTY_MODIFIERS = [];\nexport var usePopper = function usePopper(referenceElement, popperElement, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      }\n    },\n    attributes: {}\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      fn: function fn(_ref) {\n        var state = _ref.state;\n        var elements = Object.keys(state.elements);\n        setState({\n          styles: fromEntries(elements.map(function (element) {\n            return [element, state.styles[element] || {}];\n          })),\n          attributes: fromEntries(elements.map(function (element) {\n            return [element, state.attributes[element]];\n          }))\n        });\n      },\n      requires: ['computeStyles']\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(optionsWithDefaults.modifiers, [updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }])\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(function () {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};","map":{"version":3,"sources":["/Users/oliverlaslett/code/seeker2/node_modules/@blueprintjs/popover2/node_modules/react-popper/lib/esm/usePopper.js"],"names":["React","createPopper","defaultCreatePopper","isEqual","fromEntries","useIsomorphicLayoutEffect","EMPTY_MODIFIERS","usePopper","referenceElement","popperElement","options","prevOptions","useRef","optionsWithDefaults","onFirstUpdate","placement","strategy","modifiers","_React$useState","useState","styles","popper","position","left","top","attributes","state","setState","updateStateModifier","useMemo","name","enabled","phase","fn","_ref","elements","Object","keys","map","element","requires","popperOptions","newOptions","concat","current","popperInstanceRef","setOptions","popperInstance","destroy","update","forceUpdate"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { createPopper as defaultCreatePopper } from '@popperjs/core';\nimport isEqual from 'react-fast-compare';\nimport { fromEntries, useIsomorphicLayoutEffect } from './utils';\nvar EMPTY_MODIFIERS = [];\nexport var usePopper = function usePopper(referenceElement, popperElement, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || 'bottom',\n    strategy: options.strategy || 'absolute',\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState({\n    styles: {\n      popper: {\n        position: optionsWithDefaults.strategy,\n        left: '0',\n        top: '0'\n      }\n    },\n    attributes: {}\n  }),\n      state = _React$useState[0],\n      setState = _React$useState[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: 'updateState',\n      enabled: true,\n      phase: 'write',\n      fn: function fn(_ref) {\n        var state = _ref.state;\n        var elements = Object.keys(state.elements);\n        setState({\n          styles: fromEntries(elements.map(function (element) {\n            return [element, state.styles[element] || {}];\n          })),\n          attributes: fromEntries(elements.map(function (element) {\n            return [element, state.attributes[element]];\n          }))\n        });\n      },\n      requires: ['computeStyles']\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(optionsWithDefaults.modifiers, [updateStateModifier, {\n        name: 'applyStyles',\n        enabled: false\n      }])\n    };\n\n    if (isEqual(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    } else {\n      prevOptions.current = newOptions;\n      return newOptions;\n    }\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useIsomorphicLayoutEffect(function () {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useIsomorphicLayoutEffect(function () {\n    if (referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [referenceElement, popperElement, options.createPopper]);\n  return {\n    state: popperInstanceRef.current ? popperInstanceRef.current.state : null,\n    styles: state.styles,\n    attributes: state.attributes,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n};"]},"metadata":{},"sourceType":"module"}