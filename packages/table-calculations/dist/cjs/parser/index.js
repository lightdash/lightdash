"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.parse = parse;
const effect_1 = require("effect");
const errors_1 = require("../errors");
// This will be generated by Peggy
// eslint-disable-next-line import/extensions, @typescript-eslint/ban-ts-comment
// @ts-ignore - Generated file
const generated_1 = require("./generated");
function parse(expression) {
    return effect_1.Effect.try({
        try: () => (0, generated_1.parse)(expression, {
            startRule: 'Expression',
        }),
        catch: (error) => {
            if (error && typeof error === 'object' && 'message' in error) {
                const err = error;
                return new errors_1.ParseError({
                    message: err.message,
                    line: err.location?.start?.line,
                    column: err.location?.start?.column,
                    expected: err.expected,
                    found: err.found,
                });
            }
            return new errors_1.ParseError({
                message: String(error),
            });
        },
    });
}
//# sourceMappingURL=index.js.map